{"version":3,"sources":["../src/vanilla-responsive-navigation.js"],"names":["_","require","ViewportDetect","isElement","viewport","ResponsiveNavigationClass","id","config","element","document","getElementById","defaults","dropdown_class","flyout","list_id","toggle_id","toggle_mobile_id","_initViewport","dropdownParents","dropdownToggles","list","toggle","toggleMobile","_render","device","getDevice","size","windowSize","trackSize","_trackSize","bind","_getBodyClass","_addToggleListener","_getDropdownParents","_hideNav","_setToggleAriaHidden","_deviceCheck","dropdown","addEventListener","_setDropdownAriaHiddenDesktop","dropdownToggle","_dropdownToggleClick","_toggleClick","isNull","e","preventDefault","_toggleDropdown","target","_setDropdownAriaHiddenMobile","body","bodyClass","className","listItems","getElementsByTagName","Array","from","filter","li","forEach","_addDropdownHoverListener","_getDropdownToggles","map","dropdownParent","_skipTextNodes","_addDropdownToggleClickListener","force","isBoolean","hideMenu","_setBodyClass","_setListClass","_setToggleAriaExpanded","ul","replace","style","display","setAttribute","hidden","offsetParent","el","method","nodeType","nextSibling","_resetDropdownParentsStates","module","exports"],"mappings":";;;;;;AAAA;;AAEA,IAAMA,IAAIC,QAAQ,aAAR,CAAV;AAAA,IACQC,iBAAiBD,QAAQ,wBAAR,CADzB;AAEAD,EAAEG,SAAF,GAAcF,QAAQ,kBAAR,CAAd;AACA,IAAMG,WAAW,IAAIF,cAAJ,EAAjB;;IAEMG,yB;AACJ,qCAAYC,EAAZ,EAA4B;AAAA,QAAZC,MAAY,uEAAH,EAAG;;AAAA;;AAC1B,QAAIC,UAAUC,SAASC,cAAT,CAAwBJ,EAAxB,CAAd;;AAEA,QAAI,CAACN,EAAEG,SAAF,CAAYK,OAAZ,CAAL,EAA2B;;AAE3B,SAAKD,MAAL,GAAcP,EAAEW,QAAF,CAAWJ,MAAX,EACZ;AACEK,sBAAgB,iBADlB;AAEEC,cAAQ,KAFV;AAGEC,eAAS,4BAHX;AAIEC,iBAAW,8BAJb;AAKEC,wBAAkB;AALpB,KADY,CAAd;AASD;;;;4BAEM;AACL,WAAKC,aAAL;AACA,WAAKC,eAAL,GAAuB,EAAvB;AACA,WAAKC,eAAL,GAAuB,EAAvB;AACA,WAAKC,IAAL,GAAYX,SAASC,cAAT,CAAwB,KAAKH,MAAL,CAAYO,OAApC,CAAZ;AACA,WAAKO,MAAL,GAAcZ,SAASC,cAAT,CAAwB,KAAKH,MAAL,CAAYQ,SAApC,CAAd;AACA,WAAKO,YAAL,GAAoBb,SAASC,cAAT,CAAwB,KAAKH,MAAL,CAAYS,gBAApC,CAApB;AACA,WAAKO,OAAL;AACD;;;oCAEc;AACb,WAAKC,MAAL,GAAcpB,SAASqB,SAAT,EAAd;AACA,WAAKC,IAAL,GAAYtB,SAASuB,UAAT,EAAZ;AACAvB,eAASwB,SAAT,CAAmB,KAAKC,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAnB;AACD;;;8BAEQ;AACP,UAAI,KAAKvB,MAAL,CAAYM,MAAhB,EAAuB;AACrB,aAAKkB,aAAL;AACD;;AAED,WAAKC,kBAAL;AACA,WAAKC,mBAAL;AACA,WAAKC,QAAL;AACA,WAAKC,oBAAL,CAA0B,CAAC,KAAKC,YAAL,EAA3B;AACD;;;8CAEyBC,Q,EAAS;AACjCA,eAASC,gBAAT,CAA0B,WAA1B,EAC2B,KAAKC,6BAAL,CAAmCT,IAAnC,CAAwC,IAAxC,EAA8CO,QAA9C,CAD3B,EAE2B,KAF3B;AAGAA,eAASC,gBAAT,CAA0B,UAA1B,EAC2B,KAAKC,6BAAL,CAAmCT,IAAnC,CAAwC,IAAxC,EAA8CO,QAA9C,CAD3B,EAE2B,KAF3B;AAGD;;;oDAE+BG,c,EAAe;AAC7CA,qBAAeF,gBAAf,CAAgC,OAAhC,EACuC,KAAKG,oBAAL,CAA0BX,IAA1B,CAA+B,IAA/B,CADvC,EAEuC,KAFvC;AAGD;;;yCAEmB;AAClB,WAAKT,MAAL,CAAYiB,gBAAZ,CAA6B,OAA7B,EAC8B,KAAKI,YAAL,CAAkBZ,IAAlB,CAAuB,IAAvB,CAD9B,EAE8B,KAF9B;;AAIA,UAAI,CAAC9B,EAAE2C,MAAF,CAAS,KAAKrB,YAAd,CAAL,EAAiC;AAC/B,aAAKA,YAAL,CAAkBgB,gBAAlB,CAAmC,OAAnC,EACoC,KAAKI,YAAL,CAAkBZ,IAAlB,CAAuB,IAAvB,CADpC,EAEoC,KAFpC;AAGD;AACF;;;mCAEa;AACZ,aAAQ,KAAKN,MAAL,KAAgB,QAAhB,IAA4B,KAAKA,MAAL,KAAgB,QAApD;AACD;;;yCAEoBoB,C,EAAE;AACrBA,QAAEC,cAAF;;AAEA,UAAI,KAAKT,YAAL,EAAJ,EAAwB;AACtB,aAAKU,eAAL,CAAqBF,EAAEG,MAAvB;AACA,aAAKC,4BAAL,CAAkCJ,EAAEG,MAApC;AACD;AACF;;;oCAEc;AACb,WAAKE,IAAL,GAAYxC,SAASwC,IAArB;AACA,WAAKC,SAAL,GAAiB,KAAKD,IAAL,CAAUE,SAA3B;AACD;;;0CAEoB;AAAA;;AACnB,UAAIC,YAAY,KAAKhC,IAAL,CAAUiC,oBAAV,CAA+B,IAA/B,CAAhB;;AAEA,WAAKnC,eAAL,GAAuBoC,MAAMC,IAAN,CAAWH,SAAX,EAAsBI,MAAtB,CAA6B,UAACC,EAAD,EAAM;AACxD,eAAOA,GAAGN,SAAH,KAAiB,MAAK5C,MAAL,CAAYK,cAApC;AACD,OAFsB,CAAvB;;AAIA,WAAKM,eAAL,CAAqBwC,OAArB,CAA6B,KAAKC,yBAAL,CAA+B7B,IAA/B,CAAoC,IAApC,CAA7B;;AAEA,WAAK8B,mBAAL;AACD;;;0CAEoB;AAAA;;AACnB,WAAKzC,eAAL,GAAuB,KAAKD,eAAL,CAAqB2C,GAArB,CAAyB,UAACC,cAAD,EAAkB;AAChE,eAAO,OAAKC,cAAL,CAAoBD,cAApB,EAAoC,YAApC,CAAP;AACD,OAFsB,CAAvB;;AAIA,WAAK3C,eAAL,CAAqBuC,OAArB,CAA6B,KAAKM,+BAAL,CAAqClC,IAArC,CAA0C,IAA1C,CAA7B;AACD;;;6BAEQmC,K,EAAM;AACb,UAAIjE,EAAEkE,SAAF,CAAYD,KAAZ,CAAJ,EAAuB;AACrB,aAAKE,QAAL,GAAgBF,KAAhB;AACD,OAFD,MAEO;AACL,aAAKE,QAAL,GAAgB,KAAK/B,YAAL,KAAsB,CAAC,KAAK+B,QAA5B,GAAuC,KAAvD;AACD;;AAED,UAAI,KAAK5D,MAAL,CAAYM,MAAhB,EAAuB;AACrB,aAAKuD,aAAL,CAAmB,KAAKD,QAAxB;AACD;;AAED,WAAKE,aAAL,CAAmB,KAAKF,QAAxB;AACA,WAAKG,sBAAL,CAA4B,KAAKH,QAAjC;AACD;;;kDAE4B;AAC3B,UAAIhB,kBAAJ;AAAA,UAAeoB,WAAf;;AAEA,WAAKpD,eAAL,CAAqBuC,OAArB,CAA6B,UAAClB,cAAD,EAAkB;AAC7CW,oBAAYX,eAAeW,SAA3B;;AAEAX,uBAAeW,SAAf,GAA2BA,UAAUqB,OAAV,CAAkB,qBAAlB,EAAyC,EAAzC,CAA3B;AACD,OAJD;;AAMA,WAAKtD,eAAL,CAAqBwC,OAArB,CAA6B,UAACI,cAAD,EAAkB;AAC7CS,aAAKT,eAAeT,oBAAf,CAAoC,IAApC,EAA0C,CAA1C,CAAL;AACAkB,WAAGE,KAAH,CAASC,OAAT,GAAmB,MAAnB;AACAH,WAAGI,YAAH,CAAgB,aAAhB,EAA+B,MAA/B;AACD,OAJD;AAKD;;;kCAEaC,M,EAAO;AACnB,WAAK3B,IAAL,CAAUE,SAAV,GAAsByB,SAAS,KAAK1B,SAAd,GAA6B,KAAKA,SAAlC,cAAtB;AACD;;;kDAE6BY,c,EAAgBlB,C,EAAE;AAC9C,UAAI,CAAC,KAAKR,YAAL,EAAL,EAAyB;AACvB,YAAIC,WAAWyB,eAAeT,oBAAf,CAAoC,IAApC,EAA0C,CAA1C,CAAf;;AAEAhB,iBAASsC,YAAT,CAAsB,aAAtB,EAAqCtC,SAASwC,YAAT,KAA0B,IAA1B,GAAiC,MAAjC,GAA0C,OAA/E;AACD;AACF;;;iDAE4BrC,c,EAAe;AAC1C,UAAIH,WAAW,KAAK0B,cAAL,CAAoBvB,cAApB,EAAoC,aAApC,CAAf;;AAEAH,eAASsC,YAAT,CAAsB,aAAtB,EAAqCtC,SAASwC,YAAT,KAA0B,IAA1B,GAAiC,MAAjC,GAA0C,OAA/E;AACD;;;kCAEaD,M,EAAO;AACnB,UAAIzB,YAAY,KAAK/B,IAAL,CAAU+B,SAA1B;;AAEA,WAAK/B,IAAL,CAAU+B,SAAV,GAAsBA,UAAUqB,OAAV,CAAkB,qBAAlB,EAAyC,EAAzC,CAAtB;;AAEA,UAAI,CAACI,MAAL,EAAY;AACV,aAAKxD,IAAL,CAAU+B,SAAV,IAAuB,OAAvB;AACD;AACF;;;2CAEsByB,M,EAAO;AAC5B,WAAKvD,MAAL,CAAYsD,YAAZ,CAAyB,eAAzB,EAA0CC,SAAS,OAAT,GAAmB,MAA7D;AACD;;;yCAEoBA,M,EAAO;AAC1B,WAAKvD,MAAL,CAAYsD,YAAZ,CAAyB,aAAzB,EAAwCC,SAAS,MAAT,GAAkB,OAA1D;AACD;;;mCAEcE,E,EAAIC,M,EAAO;AACxB,UAAIvE,UAAUsE,GAAGC,MAAH,CAAd;;AAEA,aAAOvE,YAAY,IAAZ,IAAoBA,QAAQwE,QAAR,KAAqB,CAAhD,EAAkD;AAChDxE,kBAAUA,QAAQyE,WAAlB;AACD;;AAED,aAAOzE,OAAP;AACD;;;iCAEYoC,C,EAAE;AACbA,QAAEC,cAAF;;AAEA,WAAKX,QAAL;AACD;;;oCAEeM,c,EAAe;AAC7B,UAAIW,YAAYX,eAAeW,SAA/B;AAAA,UACMd,WAAW,KAAK0B,cAAL,CAAoBvB,cAApB,EAAoC,aAApC,CADjB;;AAGA,UAAIH,SAASwC,YAAT,KAA0B,IAA9B,EAAmC;AACjCxC,iBAASoC,KAAT,CAAeC,OAAf,GAAyB,OAAzB;AACAlC,uBAAeW,SAAf,IAA4B,OAA5B;AACD,OAHD,MAGO;AACLd,iBAASoC,KAAT,CAAeC,OAAf,GAAyB,MAAzB;AACAlC,uBAAeW,SAAf,GAA2BA,UAAUqB,OAAV,CAAkB,qBAAlB,EAAyC,EAAzC,CAA3B;AACD;AACF;;;+BAEUhD,M,EAAQE,I,EAAK;AACtB,WAAKwD,2BAAL;;AAEA,UAAI,KAAK1D,MAAL,KAAgBA,MAApB,EAA2B;AACzB,aAAKA,MAAL,GAAcA,MAAd;AACD;;AAED,UAAI,KAAKY,YAAL,EAAJ,EAAwB;AACtB,aAAKF,QAAL,CAAc,IAAd;AACA,aAAKC,oBAAL,CAA0B,KAA1B;AACD,OAHD,MAGO;AACL,aAAKD,QAAL,CAAc,KAAd;AACA,aAAKC,oBAAL,CAA0B,IAA1B;AACD;;AAED,WAAKT,IAAL,GAAYA,IAAZ;AACD;;;;;;AAGHyD,OAAOC,OAAP,GAAiB/E,yBAAjB;AACA","file":"vanilla-responsive-navigation.js","sourcesContent":["/* eslint-disable max-len, one-var */\n\nconst _ = require('lodash/core')\n      , ViewportDetect = require('viewport-detection-es6');\n_.isElement = require('lodash/isElement');\nconst viewport = new ViewportDetect();\n\nclass ResponsiveNavigationClass{\n  constructor(id, config = {}){\n    let element = document.getElementById(id);\n\n    if (!_.isElement(element)) return;\n\n    this.config = _.defaults(config,\n      {\n        dropdown_class: 'dropdown-parent'\n      , flyout: false\n      , list_id: 'responsive-navigation-list'\n      , toggle_id: 'responsive-navigation-toggle'\n      , toggle_mobile_id: null\n      }\n    );\n  }\n\n  _init(){\n    this._initViewport();\n    this.dropdownParents = [];\n    this.dropdownToggles = [];\n    this.list = document.getElementById(this.config.list_id);\n    this.toggle = document.getElementById(this.config.toggle_id);\n    this.toggleMobile = document.getElementById(this.config.toggle_mobile_id);\n    this._render();\n  }\n\n  _initViewport(){\n    this.device = viewport.getDevice();\n    this.size = viewport.windowSize();\n    viewport.trackSize(this._trackSize.bind(this));\n  }\n\n  _render(){\n    if (this.config.flyout){\n      this._getBodyClass();\n    }\n\n    this._addToggleListener();\n    this._getDropdownParents();\n    this._hideNav();\n    this._setToggleAriaHidden(!this._deviceCheck());\n  }\n\n  _addDropdownHoverListener(dropdown){\n    dropdown.addEventListener('mouseover'\n                             , this._setDropdownAriaHiddenDesktop.bind(this, dropdown)\n                             , false);\n    dropdown.addEventListener('mouseout'\n                             , this._setDropdownAriaHiddenDesktop.bind(this, dropdown)\n                             , false);\n  }\n\n  _addDropdownToggleClickListener(dropdownToggle){\n    dropdownToggle.addEventListener('click'\n                                         , this._dropdownToggleClick.bind(this)\n                                         , false);\n  }\n\n  _addToggleListener(){\n    this.toggle.addEventListener('click'\n                                , this._toggleClick.bind(this)\n                                , false);\n\n    if (!_.isNull(this.toggleMobile)){\n      this.toggleMobile.addEventListener('click'\n                                        , this._toggleClick.bind(this)\n                                        , false);\n    }\n  }\n\n  _deviceCheck(){\n    return (this.device === 'mobile' || this.device === 'tablet');\n  }\n\n  _dropdownToggleClick(e){\n    e.preventDefault();\n\n    if (this._deviceCheck()){\n      this._toggleDropdown(e.target);\n      this._setDropdownAriaHiddenMobile(e.target);\n    }\n  }\n\n  _getBodyClass(){\n    this.body = document.body;\n    this.bodyClass = this.body.className;\n  }\n\n  _getDropdownParents(){\n    let listItems = this.list.getElementsByTagName('li');\n\n    this.dropdownParents = Array.from(listItems).filter((li)=>{\n      return li.className === this.config.dropdown_class;\n    });\n\n    this.dropdownParents.forEach(this._addDropdownHoverListener.bind(this));\n\n    this._getDropdownToggles();\n  }\n\n  _getDropdownToggles(){\n    this.dropdownToggles = this.dropdownParents.map((dropdownParent)=>{\n      return this._skipTextNodes(dropdownParent, 'firstChild');\n    });\n\n    this.dropdownToggles.forEach(this._addDropdownToggleClickListener.bind(this));\n  }\n\n  _hideNav(force){\n    if (_.isBoolean(force)){\n      this.hideMenu = force;\n    } else {\n      this.hideMenu = this._deviceCheck() ? !this.hideMenu : false;\n    }\n\n    if (this.config.flyout){\n      this._setBodyClass(this.hideMenu);\n    }\n\n    this._setListClass(this.hideMenu);\n    this._setToggleAriaExpanded(this.hideMenu);\n  }\n\n  _resetDropdownParentsStates(){\n    let className, ul;\n\n    this.dropdownToggles.forEach((dropdownToggle)=>{\n      className = dropdownToggle.className;\n\n      dropdownToggle.className = className.replace(/(?:^|\\s)open(?!\\S)/g, '');\n    });\n\n    this.dropdownParents.forEach((dropdownParent)=>{\n      ul = dropdownParent.getElementsByTagName('ul')[0];\n      ul.style.display = 'none';\n      ul.setAttribute('aria-hidden', 'true');\n    });\n  }\n\n  _setBodyClass(hidden){\n    this.body.className = hidden ? this.bodyClass : `${this.bodyClass} nav-open`;\n  }\n\n  _setDropdownAriaHiddenDesktop(dropdownParent, e){\n    if (!this._deviceCheck()){\n      let dropdown = dropdownParent.getElementsByTagName('ul')[0];\n\n      dropdown.setAttribute('aria-hidden', dropdown.offsetParent === null ? 'true' : 'false');\n    }\n  }\n\n  _setDropdownAriaHiddenMobile(dropdownToggle){\n    let dropdown = this._skipTextNodes(dropdownToggle, 'nextSibling');\n\n    dropdown.setAttribute('aria-hidden', dropdown.offsetParent === null ? 'true' : 'false');\n  }\n\n  _setListClass(hidden){\n    let className = this.list.className;\n\n    this.list.className = className.replace(/(?:^|\\s)open(?!\\S)/g, '');\n\n    if (!hidden){\n      this.list.className += ' open';\n    }\n  }\n\n  _setToggleAriaExpanded(hidden){\n    this.toggle.setAttribute('aria-expanded', hidden ? 'false' : 'true');\n  }\n\n  _setToggleAriaHidden(hidden){\n    this.toggle.setAttribute('aria-hidden', hidden ? 'true' : 'false');\n  }\n\n  _skipTextNodes(el, method){\n    let element = el[method];\n\n    while (element !== null && element.nodeType !== 1){\n      element = element.nextSibling;\n    }\n\n    return element;\n  }\n\n  _toggleClick(e){\n    e.preventDefault();\n\n    this._hideNav();\n  }\n\n  _toggleDropdown(dropdownToggle){\n    let className = dropdownToggle.className\n        , dropdown = this._skipTextNodes(dropdownToggle, 'nextSibling');\n\n    if (dropdown.offsetParent === null){\n      dropdown.style.display = 'block';\n      dropdownToggle.className += ' open';\n    } else {\n      dropdown.style.display = 'none';\n      dropdownToggle.className = className.replace(/(?:^|\\s)open(?!\\S)/g, '');\n    }\n  }\n\n  _trackSize(device, size){\n    this._resetDropdownParentsStates();\n\n    if (this.device !== device){\n      this.device = device;\n    }\n\n    if (this._deviceCheck()){\n      this._hideNav(true);\n      this._setToggleAriaHidden(false);\n    } else {\n      this._hideNav(false);\n      this._setToggleAriaHidden(true);\n    }\n\n    this.size = size;\n  }\n}\n\nmodule.exports = ResponsiveNavigationClass;\n/* eslint-enable */\n"]}