{"version":3,"sources":["../src/vanilla-responsive-navigation.js"],"names":[],"mappings":"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","file":"vanilla-responsive-navigation.js","sourcesContent":["const _ = require('lodash/core')\n      , ViewportDetect = require('viewport-detection-es6');\n_.isElement = require('lodash/isElement');\n/* eslint-disable one-var */\nconst viewport = new ViewportDetect();\n/* eslint-enable */\n\nclass ResponsiveNavigationClass{\n  constructor(id, config = {}){\n    let element = document.getElementById(id);\n\n    if (!_.isElement(element)) return;\n\n    this.config = _.defaults(config,\n      {\n        dropdown_class: 'dropdown-parent'\n      , flyout: false\n      , list_id: 'responsive-navigation-list'\n      , toggle_id: 'responsive-navigation-toggle'\n      , toggle_mobile_id: 'responsive-navigation-toggle-mobile'\n      }\n    );\n  }\n\n  _init(){\n    this._initViewport();\n\n    this.dropdownParents = [];\n    this.dropdownParentsMobile = [];\n    this.list = document.getElementById(this.config.list_id);\n    this.toggle = document.getElementById(this.config.toggle_id);\n    this.toggleMobile = document.getElementById(this.config.toggle_mobile_id);\n    this._render();\n  }\n\n  _initViewport(){\n    this.device = viewport.getDevice();\n    this.size = viewport.windowSize();\n    viewport.trackSize(this._trackSize.bind(this));\n  }\n\n  _render(){\n    if (this.config.flyout){\n      this._getBodyClass();\n    }\n\n    this._addToggleListener();\n    this._getDropdownParents();\n    this._hideNav();\n    this._setToggleAriaHidden(!this._deviceCheck());\n  }\n\n  _addDropdownClickListener(dropdownParentMobile){\n    /* eslint-disable max-len */\n    dropdownParentMobile.addEventListener('click'\n                                         , this._dropdownParentMobileClick.bind(this)\n                                         , false);\n    /* eslint-enable */\n  }\n\n  _addDropdownHoverListener(dropdown){\n    dropdown.addEventListener('mouseover'\n                             , this._setDropdownAriaHiddenDesktop.bind(this)\n                             , false);\n    dropdown.addEventListener('mouseout'\n                             , this._setDropdownAriaHiddenDesktop.bind(this)\n                             , false);\n  }\n\n  _addToggleListener(){\n    this.toggle.addEventListener('click'\n                                , this._toggleClick.bind(this)\n                                , false);\n\n    if (!_.isNull(this.toggleMobile)){\n      this.toggleMobile.addEventListener('click'\n                                        , this._toggleClick.bind(this)\n                                        , false);\n    }\n  }\n\n  _deviceCheck(){\n    return (this.device === 'mobile' || this.device === 'tablet');\n  }\n\n  _dropdownParentMobileClick(e){\n    e.preventDefault();\n\n    if (this._deviceCheck()){\n      this._toggleDropdown(e.target);\n      this._setDropdownAriaHiddenMobile(e.target);\n    }\n  }\n\n  _getBodyClass(){\n    this.body = document.body;\n    this.bodyClass = this.body.className;\n  }\n\n  _getDropdownParents(){\n    let listItems = this.list.getElementsByTagName('li');\n\n    _.forEach(listItems, function(li){\n      if (li.className === this.config.dropdown_class){\n        this.dropdownParents.push(li);\n      }\n    }.bind(this));\n\n    _.forEach(this.dropdownParents, this._addDropdownHoverListener.bind(this));\n\n    this._getDropdownParentsMobile();\n  }\n\n  _getDropdownParentsMobile(){\n    _.forEach(this.dropdownParents, function(dropdownParent){\n      /* eslint-disable max-len */\n      this.dropdownParentsMobile.push(this._skipTextNodes(dropdownParent, 'firstChild'));\n      /* eslint-enable */\n    }.bind(this));\n\n    /* eslint-disable max-len */\n    _.forEach(this.dropdownParentsMobile, this._addDropdownClickListener.bind(this));\n    /* eslint-enable */\n  }\n\n  _hideNav(force){\n    if (_.isBoolean(force)){\n      this.hideMenu = force;\n    } else {\n      this.hideMenu = (this._deviceCheck()) ? !this.hideMenu : false;\n    }\n\n    if (this.config.flyout){\n      this._setBodyClass(this.hideMenu);\n    }\n\n    this._setListClass(this.hideMenu);\n    this._setToggleAriaExpanded(this.hideMenu);\n  }\n\n  _resetDropdownParentsStates(){\n    let className;\n\n    _.forEach(this.dropdownParentsMobile, function(dropdownParent){\n      className = dropdownParent.className;\n\n      dropdownParent.className = className.replace(/(?:^|\\s)open(?!\\S)/g, '');\n      // dropdownParent.className.replace(/(?:^|\\s)open(?!\\S)/g, '');\n    });\n\n    _.forEach(this.dropdownParents, function(dropdownParent){\n      let ul = dropdownParent.getElementsByTagName('ul')[0];\n      ul.style.display = 'none';\n      ul.setAttribute('aria-hidden', 'true');\n    });\n  }\n\n  _setBodyClass(hidden){\n    /* eslint-disable max-len */\n    this.body.className = hidden ? this.bodyClass : this.bodyClass + ' nav-open';\n    /* eslint-enable */\n  }\n\n  _setDropdownAriaHiddenDesktop(e){\n    if (!this._deviceCheck()){\n      let ul\n          , hoveredParent = e.target.parentNode;\n\n      if (hoveredParent.className === this.config.dropdown_class){\n        ul = hoveredParent.getElementsByTagName('ul')[0];\n      } else {\n        ul = hoveredParent.parentNode;\n      }\n\n      /* eslint-disable max-len */\n      ul.setAttribute('aria-hidden', ul.offsetParent === null ? 'true' : 'false');\n      /* eslint-enable */\n    }\n  }\n\n  _setDropdownAriaHiddenMobile(dropdownParent){\n    let ul = this._skipTextNodes(dropdownParent, 'nextSibling');\n\n    ul.setAttribute('aria-hidden', ul.offsetParent === null ? 'true' : 'false');\n  }\n\n  _setListClass(hidden){\n    let className = this.list.className;\n\n    this.list.className = className.replace(/(?:^|\\s)open(?!\\S)/g, '');\n\n    if (!hidden){\n      this.list.className += ' open';\n    }\n  }\n\n  _setToggleAriaExpanded(hidden){\n    this.toggle.setAttribute('aria-expanded', hidden ? 'false' : 'true');\n  }\n\n  _setToggleAriaHidden(hidden){\n    this.toggle.setAttribute('aria-hidden', hidden ? 'true' : 'false');\n  }\n\n  _skipTextNodes(el, method){\n    let element = el[method];\n\n    while (element !== null && element.nodeType !== 1){\n      element = element.nextSibling;\n    }\n\n    return element;\n  }\n\n  _toggleClick(e){\n    e.preventDefault();\n\n    this._hideNav();\n  }\n\n  _toggleDropdown(dropdownParentMobile){\n    let className = dropdownParentMobile.className\n        , dropdown = this._skipTextNodes(dropdownParentMobile, 'nextSibling');\n\n    if (dropdown.offsetParent === null){\n      dropdown.style.display = 'block';\n      dropdownParentMobile.className += ' open';\n    } else {\n      dropdown.style.display = 'none';\n      /* eslint-disable max-len */\n      dropdownParentMobile.className = className.replace(/(?:^|\\s)open(?!\\S)/g, '');\n      /* eslint-enable */\n    }\n  }\n\n  _trackSize(device, size){\n    this._resetDropdownParentsStates();\n\n    if (this.device !== device){\n      this.device = device;\n    }\n\n    if (this._deviceCheck()){\n      this._hideNav(true);\n      this._setToggleAriaHidden(false);\n    } else {\n      this._hideNav(false);\n      this._setToggleAriaHidden(true);\n    }\n\n    this.size = size;\n  }\n}\n\nmodule.exports = ResponsiveNavigationClass;\n"]}