{"version":3,"sources":["../src/vanilla-responsive-navigation.js"],"names":["_","require","ViewportDetect","isElement","viewport","ResponsiveNavigationClass","id","config","element","document","getElementById","defaults","dropdown_class","flyout","list_id","toggle_id","toggle_mobile_id","_initViewport","dropdownParents","dropdownToggles","list","toggle","toggleMobile","_render","device","getDevice","size","windowSize","trackSize","_trackSize","bind","_getBodyClass","_addToggleListener","_getDropdownParents","_hideNav","_setToggleAriaHidden","_deviceCheck","dropdownToggle","addEventListener","_dropdownToggleClick","dropdown","_setDropdownAriaHiddenDesktop","_toggleClick","isNull","e","preventDefault","_toggleDropdown","target","_setDropdownAriaHiddenMobile","body","bodyClass","className","listItems","getElementsByTagName","forEach","li","push","_addDropdownHoverListener","_getDropdownToggles","dropdownParent","_skipTextNodes","_addDropdownToggleClickListener","force","isBoolean","hideMenu","_setBodyClass","_setListClass","_setToggleAriaExpanded","replace","ul","style","display","setAttribute","hidden","offsetParent","el","method","nodeType","nextSibling","_resetDropdownParentsStates","module","exports"],"mappings":"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","file":"vanilla-responsive-navigation.js","sourcesContent":["const _ = require('lodash/core')\n      , ViewportDetect = require('viewport-detection-es6');\n_.isElement = require('lodash/isElement');\n/* eslint-disable one-var */\nconst viewport = new ViewportDetect();\n/* eslint-enable */\n\nclass ResponsiveNavigationClass{\n  constructor(id, config = {}){\n    let element = document.getElementById(id);\n\n    if (!_.isElement(element)) return;\n\n    this.config = _.defaults(config,\n      {\n        dropdown_class: 'dropdown-parent'\n      , flyout: false\n      , list_id: 'responsive-navigation-list'\n      , toggle_id: 'responsive-navigation-toggle'\n      , toggle_mobile_id: null\n      }\n    );\n  }\n\n  _init(){\n    this._initViewport();\n\n    this.dropdownParents = [];\n    this.dropdownToggles = [];\n    this.list = document.getElementById(this.config.list_id);\n    this.toggle = document.getElementById(this.config.toggle_id);\n    this.toggleMobile = document.getElementById(this.config.toggle_mobile_id);\n    this._render();\n  }\n\n  _initViewport(){\n    this.device = viewport.getDevice();\n    this.size = viewport.windowSize();\n    viewport.trackSize(this._trackSize.bind(this));\n  }\n\n  _render(){\n    if (this.config.flyout){\n      this._getBodyClass();\n    }\n\n    this._addToggleListener();\n    this._getDropdownParents();\n    this._hideNav();\n    this._setToggleAriaHidden(!this._deviceCheck());\n  }\n\n  _addDropdownToggleClickListener(dropdownToggle){\n    /* eslint-disable max-len */\n    dropdownToggle.addEventListener('click'\n                                         , this._dropdownToggleClick.bind(this)\n                                         , false);\n    /* eslint-enable */\n  }\n\n  _addDropdownHoverListener(dropdown){\n    dropdown.addEventListener('mouseover'\n                             , this._setDropdownAriaHiddenDesktop.bind(this, dropdown)\n                             , false);\n    dropdown.addEventListener('mouseout'\n                             , this._setDropdownAriaHiddenDesktop.bind(this, dropdown)\n                             , false);\n  }\n\n  _addToggleListener(){\n    this.toggle.addEventListener('click'\n                                , this._toggleClick.bind(this)\n                                , false);\n\n    if (!_.isNull(this.toggleMobile)){\n      this.toggleMobile.addEventListener('click'\n                                        , this._toggleClick.bind(this)\n                                        , false);\n    }\n  }\n\n  _deviceCheck(){\n    return (this.device === 'mobile' || this.device === 'tablet');\n  }\n\n  _dropdownToggleClick(e){\n    e.preventDefault();\n\n    if (this._deviceCheck()){\n      this._toggleDropdown(e.target);\n      this._setDropdownAriaHiddenMobile(e.target);\n    }\n  }\n\n  _getBodyClass(){\n    this.body = document.body;\n    this.bodyClass = this.body.className;\n  }\n\n  _getDropdownParents(){\n    let listItems = this.list.getElementsByTagName('li');\n\n    _.forEach(listItems, function(li){\n      if (li.className === this.config.dropdown_class){\n        this.dropdownParents.push(li);\n      }\n    }.bind(this));\n\n    _.forEach(this.dropdownParents, this._addDropdownHoverListener.bind(this));\n\n    this._getDropdownToggles();\n  }\n\n  _getDropdownToggles(){\n    _.forEach(this.dropdownParents, function(dropdownParent){\n      /* eslint-disable max-len */\n      this.dropdownToggles.push(this._skipTextNodes(dropdownParent, 'firstChild'));\n      /* eslint-enable */\n    }.bind(this));\n\n    /* eslint-disable max-len */\n    _.forEach(this.dropdownToggles, this._addDropdownToggleClickListener.bind(this));\n    /* eslint-enable */\n  }\n\n  _hideNav(force){\n    if (_.isBoolean(force)){\n      this.hideMenu = force;\n    } else {\n      this.hideMenu = (this._deviceCheck()) ? !this.hideMenu : false;\n    }\n\n    if (this.config.flyout){\n      this._setBodyClass(this.hideMenu);\n    }\n\n    this._setListClass(this.hideMenu);\n    this._setToggleAriaExpanded(this.hideMenu);\n  }\n\n  _resetDropdownParentsStates(){\n    let className;\n\n    _.forEach(this.dropdownToggles, function(dropdownParent){\n      className = dropdownParent.className;\n\n      dropdownParent.className = className.replace(/(?:^|\\s)open(?!\\S)/g, '');\n    });\n\n    _.forEach(this.dropdownParents, function(dropdownParent){\n      let ul = dropdownParent.getElementsByTagName('ul')[0];\n      ul.style.display = 'none';\n      ul.setAttribute('aria-hidden', 'true');\n    });\n  }\n\n  _setBodyClass(hidden){\n    /* eslint-disable max-len */\n    this.body.className = hidden ? this.bodyClass : this.bodyClass + ' nav-open';\n    /* eslint-enable */\n  }\n\n  _setDropdownAriaHiddenDesktop(dropdownParent, e){\n    if (!this._deviceCheck()){\n      let dropdown = dropdownParent.getElementsByTagName('ul')[0];\n\n      /* eslint-disable max-len */\n      dropdown.setAttribute('aria-hidden', dropdown.offsetParent === null ? 'true' : 'false');\n      /* eslint-enable */\n    }\n  }\n\n  _setDropdownAriaHiddenMobile(dropdownToggle){\n    let dropdown = this._skipTextNodes(dropdownToggle, 'nextSibling');\n\n    dropdown.setAttribute('aria-hidden', dropdown.offsetParent === null ? 'true' : 'false');\n  }\n\n  _setListClass(hidden){\n    let className = this.list.className;\n\n    this.list.className = className.replace(/(?:^|\\s)open(?!\\S)/g, '');\n\n    if (!hidden){\n      this.list.className += ' open';\n    }\n  }\n\n  _setToggleAriaExpanded(hidden){\n    this.toggle.setAttribute('aria-expanded', hidden ? 'false' : 'true');\n  }\n\n  _setToggleAriaHidden(hidden){\n    this.toggle.setAttribute('aria-hidden', hidden ? 'true' : 'false');\n  }\n\n  _skipTextNodes(el, method){\n    let element = el[method];\n\n    while (element !== null && element.nodeType !== 1){\n      element = element.nextSibling;\n    }\n\n    return element;\n  }\n\n  _toggleClick(e){\n    e.preventDefault();\n\n    this._hideNav();\n  }\n\n  _toggleDropdown(dropdownToggle){\n    let className = dropdownToggle.className\n        , dropdown = this._skipTextNodes(dropdownToggle, 'nextSibling');\n\n    if (dropdown.offsetParent === null){\n      dropdown.style.display = 'block';\n      dropdownToggle.className += ' open';\n    } else {\n      dropdown.style.display = 'none';\n      /* eslint-disable max-len */\n      dropdownToggle.className = className.replace(/(?:^|\\s)open(?!\\S)/g, '');\n      /* eslint-enable */\n    }\n  }\n\n  _trackSize(device, size){\n    this._resetDropdownParentsStates();\n\n    if (this.device !== device){\n      this.device = device;\n    }\n\n    if (this._deviceCheck()){\n      this._hideNav(true);\n      this._setToggleAriaHidden(false);\n    } else {\n      this._hideNav(false);\n      this._setToggleAriaHidden(true);\n    }\n\n    this.size = size;\n  }\n}\n\nmodule.exports = ResponsiveNavigationClass;\n"]}